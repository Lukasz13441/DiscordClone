<link rel="stylesheet" href="/css/test.css" />
<div class="chat-container">
    <div id="messagesList" class="messages-area">
        @foreach (var msg in ViewBag.Messages)
        {
            <div class="message-row" data-message-id="@msg.Id">
                <img src="@msg.User.AvatarURL" class="avatar" />

                <div class="message-content">
                    <div class="message-header">
                        <span class="username">@msg.User.Username</span>
                        <span class="timestamp">@msg.CreatedAt.ToString("HH:mm")</span>
                    </div>

                    <div class="message-text">@msg.Value</div>

                    <!-- miejsce na reakcje -->
                    <div class="message-reactions">
                        @foreach (var reaction in msg.Reactions)
                        {
                            var count = reaction.Users.Count;
                            if (count > 0)
                            {
                                <div class="reaction data-emoji="@reaction.Emoji">
                                    @reaction.Emoji <span class="count">@count</span>
                                </div>
                            }
                        }
                    </div>

                    <!-- ikona dodawania reakcji -->
                    <div class="add-reaction-btn">➕</div>

                    <!-- dodatkowe akcje -->
                    <div class="message-actions">
                        <span class="action-button edit-message-btn">✏️</span>
                        <span class="action-button delete-message-btn">🗑️</span>
                    </div>

                    <!-- popup z reakcjami -->
                    <div class="reaction-picker">
                        <span class="reaction-option">👍</span>
                        <span class="reaction-option">❤️</span>
                        <span class="reaction-option">😂</span>
                        <span class="reaction-option">🔥</span>
                        <span class="reaction-option">😎</span>
                    </div>
                </div>
            </div>
        }
    </div>

    <div class="chat-input-area">
        <input hidden id="channelId" value="@ViewBag.Id" />
        <input hidden id="UserProfileId" value="@ViewBag.UserProfile.Id" />
        <input hidden id="userInput" value="@ViewBag.UserProfile.Username" />

        <input type="text" id="messageInput" class="chat-input" placeholder="Wiadomość" />
        <button id="sendBtn" class="chat-send-btn">Wyślij</button>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.5/signalr.min.js"></script>
<script src="/js/Chathub.js"></script>